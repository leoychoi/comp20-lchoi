<!DOCTYPE html>
<html>
  <head>
  <title>Marauder's Map</title>
  <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css" type="text/css" />
    <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: { lat: 42.406394, lng: -71.120601},
          zoom: 15
        };
        var map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);
      }
      function success(pos) {
        crd = pos.coords;
        console.log(crd.latitude, crd.longitude, crd.accuracy);
        params = "login=Pepper&lat="+crd.latitude+"&lng="+crd.longitude
        console.log(params);
//      request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        request.setRequestHeader("Content-length", params.length);
        request.setRequestHeader("Connection", "close");
        request.onreadystatechange = dataReady;
        request.open("POST", url, true);
        request.send(params);
      }
      function error(err) {
        console.warn("error: " + err.message);
      }
      function dataReady() {
        if (request.readyState === 4 && request.status === 200) {
          console.log(request.responseText);
        }
      }
      var crd;
      var params;
      google.maps.event.addDomListener(window, 'load', initialize);
      navigator.geolocation.getCurrentPosition(success, error);


      var url = "http://chickenofthesea.herokuapp.com/sendLocation";
      var request = new XMLHttpRequest();
    </script>
  </head>
  <body>
<div id="map-canvas"></div>
  </body>
</html>
